# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SMS –∏ –∑–≤–æ–Ω–∫–æ–≤ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞

## üìñ –ö–∞–∫ –º—ã —ç—Ç–æ —Å–¥–µ–ª–∞–ª–∏ –∏ –∑–∞—á–µ–º?

–ú—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏ —Å–∏—Å—Ç–µ–º—É –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ —á–µ—Ä–µ–∑ SMS –∏–ª–∏ –∑–≤–æ–Ω–æ–∫. –í —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–¥ –ø—Ä–æ—Å—Ç–æ –≤—ã–≤–æ–¥–∏—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞—Ç—Ä–∞—Ç –Ω–∞ SMS.

**–ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —Ç–∞–∫?**
- **–†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** - –∫–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –±–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SMS-—Å–µ—Ä–≤–∏—Å–æ–≤
- **–ì–∏–±–∫–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π SMS-—Å–µ—Ä–≤–∏—Å —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –∏–º–µ–µ—Ç —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?** –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫–æ–¥–∞ —Å–µ—Ä–≤–µ—Ä –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–π 4-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –µ–≥–æ –≤ —Å–µ—Å—Å–∏–∏ —Å –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏, –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ - –≤—ã–≤–æ–¥–∏—Ç –≤ –∫–æ–Ω—Å–æ–ª—å).

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç, –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É SMS –∏ –∑–≤–æ–Ω–∫–æ–≤ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –≤—Ö–æ–¥–µ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç.

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (—Ä–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

–í —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø—Ä–æ—Å—Ç–æ –≤—ã–≤–æ–¥–∏—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞. –≠—Ç–æ —É–¥–æ–±–Ω–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

### –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ backend —Å–µ—Ä–≤–µ—Ä:
   ```bash
   cd backend
   python app.py
   ```

2. –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏–ª–∏ –≤—Ö–æ–¥–µ –∫–æ–¥ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω –≤ –∫–æ–Ω—Å–æ–ª—å:
   ```
   [AUTH] Code for 74951234567: 1234 (method: sms)
   ```

3. –í–≤–µ–¥–∏—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ –≤ —Ñ–æ—Ä–º—É –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### –í–∞—Ä–∏–∞–Ω—Ç 1: SMS.ru (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –†–æ—Å—Å–∏–∏)

SMS.ru - –ø–æ–ø—É–ª—è—Ä–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ SMS –≤ –†–æ—Å—Å–∏–∏ —Å –ø—Ä–æ—Å—Ç—ã–º API.

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
pip install smsru
```

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [sms.ru](https://sms.ru/)
2. –ü–æ–ª—É—á–∏—Ç–µ API ID –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ
3. –î–æ–±–∞–≤—å—Ç–µ –≤ `backend/app.py`:

```python
import smsru

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è SMS.ru
SMSRU_API_ID = os.getenv('SMSRU_API_ID', '')

def send_sms_via_smsru(phone: str, code: str) -> bool:
    """–û—Ç–ø—Ä–∞–≤–∏—Ç—å SMS —á–µ—Ä–µ–∑ SMS.ru"""
    try:
        client = smsru.SmsRu(SMSRU_API_ID)
        response = client.send_one(phone, f'–í–∞—à –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è: {code}')
        return response.status_code == 200
    except Exception as e:
        print(f"[ERROR] SMS.ru error: {e}")
        return False
```

4. –û–±–Ω–æ–≤–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `send_verification_code`:

```python
@app.route('/api/auth/send-code', methods=['POST'])
def send_verification_code():
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...
    
    if method == 'sms':
        if SMSRU_API_ID:
            send_sms_via_smsru(normalized_phone, code)
        else:
            print(f"[AUTH] Code for {normalized_phone}: {code} (method: sms)")
    # ...
```

5. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   ```bash
   export SMSRU_API_ID="your-api-id-here"
   ```

#### –°—Ç–æ–∏–º–æ—Å—Ç—å
- ~2-3 —Ä—É–±–ª—è –∑–∞ SMS –≤ –†–æ—Å—Å–∏–∏
- –ï—Å—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: Twilio (–º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π)

Twilio - –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è SMS –∏ –∑–≤–æ–Ω–∫–æ–≤.

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
pip install twilio
```

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [twilio.com](https://www.twilio.com/)
2. –ü–æ–ª—É—á–∏—Ç–µ Account SID –∏ Auth Token
3. –ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ SMS/–∑–≤–æ–Ω–∫–æ–≤
4. –î–æ–±–∞–≤—å—Ç–µ –≤ `backend/app.py`:

```python
from twilio.rest import Client

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Twilio
TWILIO_ACCOUNT_SID = os.getenv('TWILIO_ACCOUNT_SID', '')
TWILIO_AUTH_TOKEN = os.getenv('TWILIO_AUTH_TOKEN', '')
TWILIO_PHONE_NUMBER = os.getenv('TWILIO_PHONE_NUMBER', '')

def send_sms_via_twilio(phone: str, code: str) -> bool:
    """–û—Ç–ø—Ä–∞–≤–∏—Ç—å SMS —á–µ—Ä–µ–∑ Twilio"""
    try:
        client = Client(TWILIO_ACCOUNT_SID, TWILIO_AUTH_TOKEN)
        message = client.messages.create(
            body=f'–í–∞—à –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è: {code}',
            from_=TWILIO_PHONE_NUMBER,
            to=phone
        )
        return message.status in ['queued', 'sent']
    except Exception as e:
        print(f"[ERROR] Twilio error: {e}")
        return False

def make_call_via_twilio(phone: str, code: str) -> bool:
    """–°–æ–≤–µ—Ä—à–∏—Ç—å –∑–≤–æ–Ω–æ–∫ —á–µ—Ä–µ–∑ Twilio"""
    try:
        client = Client(TWILIO_ACCOUNT_SID, TWILIO_AUTH_TOKEN)
        # –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ TwiML –¥–ª—è –ø—Ä–æ–∏–∑–Ω–µ—Å–µ–Ω–∏—è –∫–æ–¥–∞
        call = client.calls.create(
            url=f'https://your-server.com/twiml/voice?code={code}',
            from_=TWILIO_PHONE_NUMBER,
            to=phone
        )
        return call.status in ['queued', 'ringing', 'in-progress']
    except Exception as e:
        print(f"[ERROR] Twilio call error: {e}")
        return False
```

5. –°–æ–∑–¥–∞–π—Ç–µ TwiML endpoint –¥–ª—è –∑–≤–æ–Ω–∫–æ–≤ (–≤ `app.py`):

```python
@app.route('/twiml/voice', methods=['GET'])
def twiml_voice():
    """TwiML –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∑–≤–æ–Ω–∫–∞ —Å –∫–æ–¥–æ–º"""
    code = request.args.get('code', '')
    # –†–∞–∑–±–∏–≤–∞–µ–º –∫–æ–¥ –Ω–∞ —Ü–∏—Ñ—Ä—ã –¥–ª—è –ø—Ä–æ–∏–∑–Ω–µ—Å–µ–Ω–∏—è
    code_digits = ' '.join(list(code))
    
    twiml = f'''<?xml version="1.0" encoding="UTF-8"?>
    <Response>
        <Say language="ru-RU">–í–∞—à –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è: {code_digits}</Say>
        <Pause length="2"/>
        <Say language="ru-RU">–ü–æ–≤—Ç–æ—Ä—è—é: {code_digits}</Say>
    </Response>'''
    
    return Response(twiml, mimetype='text/xml')
```

6. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   ```bash
   export TWILIO_ACCOUNT_SID="your-account-sid"
   export TWILIO_AUTH_TOKEN="your-auth-token"
   export TWILIO_PHONE_NUMBER="+1234567890"
   ```

#### –°—Ç–æ–∏–º–æ—Å—Ç—å
- ~$0.0075 –∑–∞ SMS –≤ –°–®–ê
- ~$0.013 –∑–∞ –º–∏–Ω—É—Ç—É –∑–≤–æ–Ω–∫–∞
- –ï—Å—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π trial —Å $15 –∫—Ä–µ–¥–∏—Ç–∞–º–∏

---

### –í–∞—Ä–∏–∞–Ω—Ç 3: smsc.ru

smsc.ru - –µ—â–µ –æ–¥–∏–Ω –ø–æ–ø—É–ª—è—Ä–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –†–æ—Å—Å–∏–∏.

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
pip install requests
```

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [smsc.ru](https://smsc.ru/)
2. –ü–æ–ª—É—á–∏—Ç–µ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å
3. –î–æ–±–∞–≤—å—Ç–µ –≤ `backend/app.py`:

```python
import requests

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è SMSC.ru
SMSC_LOGIN = os.getenv('SMSC_LOGIN', '')
SMSC_PASSWORD = os.getenv('SMSC_PASSWORD', '')

def send_sms_via_smsc(phone: str, code: str) -> bool:
    """–û—Ç–ø—Ä–∞–≤–∏—Ç—å SMS —á–µ—Ä–µ–∑ SMSC.ru"""
    try:
        url = 'https://smsc.ru/sys/send.php'
        params = {
            'login': SMSC_LOGIN,
            'psw': SMSC_PASSWORD,
            'phones': phone,
            'mes': f'–í–∞—à –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è: {code}',
            'fmt': 3  # JSON —Ñ–æ—Ä–º–∞—Ç
        }
        response = requests.get(url, params=params)
        result = response.json()
        return result.get('error_code') == 0
    except Exception as e:
        print(f"[ERROR] SMSC.ru error: {e}")
        return False
```

4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   ```bash
   export SMSC_LOGIN="your-login"
   export SMSC_PASSWORD="your-password"
   ```

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏/—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ–∫—É—â—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é (–≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å)
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã (Twilio trial, SMS.ru —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º)

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –≤ –†–æ—Å—Å–∏–∏
- **SMS.ru** - –ª—É—á—à–∏–π –≤—ã–±–æ—Ä –ø–æ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—é —Ü–µ–Ω–∞/–∫–∞—á–µ—Å—Ç–≤–æ
- **smsc.ru** - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ —Å –ø–æ—Ö–æ–∂–∏–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º

### –î–ª—è –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **Twilio** - –Ω–∞–¥–µ–∂–Ω—ã–π –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π —Å–µ—Ä–≤–∏—Å

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç–µ API –∫–ª—é—á–∏ –≤ –∫–æ–¥–µ** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ —á–∞—Å—Ç–æ—Ç—É –∑–∞–ø—Ä–æ—Å–æ–≤** - –¥–æ–±–∞–≤—å—Ç–µ rate limiting –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Å–ø–∞–º–∞
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS** - –¥–ª—è –∑–∞—â–∏—Ç—ã –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ
4. **–õ–æ–≥–∏—Ä—É–π—Ç–µ –ø–æ–ø—ã—Ç–∫–∏** - –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –æ—Ç–ª–∞–¥–∫–∏

## –ü—Ä–∏–º–µ—Ä –¥–æ–±–∞–≤–ª–µ–Ω–∏—è rate limiting

```python
from functools import wraps
from datetime import datetime, timedelta

# –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è rate limiting (–≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Redis)
rate_limit_store = {}

def rate_limit(max_requests=5, period_minutes=15):
    """–î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤"""
    def decorator(f):
        @wraps(f)
        def wrapper(*args, **kwargs):
            phone = kwargs.get('phone') or (args[0] if args else None)
            if not phone:
                return f(*args, **kwargs)
            
            key = f"rate_limit_{phone}"
            now = datetime.utcnow()
            
            if key in rate_limit_store:
                requests, last_reset = rate_limit_store[key]
                if now - last_reset > timedelta(minutes=period_minutes):
                    rate_limit_store[key] = [1, now]
                elif requests >= max_requests:
                    return jsonify({'error': '–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.'}), 429
                else:
                    rate_limit_store[key][0] += 1
            else:
                rate_limit_store[key] = [1, now]
            
            return f(*args, **kwargs)
        return wrapper
    return decorator

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
@app.route('/api/auth/send-code', methods=['POST'])
@rate_limit(max_requests=5, period_minutes=15)
def send_verification_code():
    # ...
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Ç–µ–∫—É—â–∏–π –∫–æ–¥

–û–±–Ω–æ–≤–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `send_verification_code` –≤ `backend/app.py`:

```python
@app.route('/api/auth/send-code', methods=['POST'])
def send_verification_code():
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞ ...
    
    # –û—Ç–ø—Ä–∞–≤–∫–∞ SMS –∏–ª–∏ –∑–≤–æ–Ω–∫–∞
    if method == 'sms':
        if SMSRU_API_ID:  # –∏–ª–∏ –¥—Ä—É–≥–æ–π —Å–µ—Ä–≤–∏—Å
            send_sms_via_smsru(normalized_phone, code)
        else:
            # –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ - –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å
            print(f"[AUTH] Code for {normalized_phone}: {code} (method: sms)")
    elif method == 'call':
        if TWILIO_ACCOUNT_SID:  # –∏–ª–∏ –¥—Ä—É–≥–æ–π —Å–µ—Ä–≤–∏—Å
            make_call_via_twilio(normalized_phone, code)
        else:
            # –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ - –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å
            print(f"[AUTH] Code for {normalized_phone}: {code} (method: call)")
    
    # ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ ...
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ:

1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –í—Ö–æ–¥ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. –û–±–∞ –º–µ—Ç–æ–¥–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (SMS –∏ –∑–≤–æ–Ω–æ–∫)
4. –û–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ (–Ω–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥, –∏—Å—Ç–µ–∫—à–∏–π –∫–æ–¥)

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ø—ã—Ç–æ–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏:

```python
import logging

logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

# –í —Ñ—É–Ω–∫—Ü–∏–∏ send_verification_code:
logger.info(f"Sending {method} code to {normalized_phone}, session: {session_id}")
```

–≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏ –≤—ã—è–≤–ª—è—Ç—å –ø—Ä–æ–±–ª–µ–º—ã.

